@startuml

actor Gebruiker

autonumber

participant APIClient as "APIClient:\nBehandelt API-aanroepen"
participant SecurityWrapper as "SecurityWrapper:\nVersleutelt gegevens"
participant APIProxy as "APIProxy:\nTussenlaag voor verouderde APIs"
participant MonitoringAgent as "MonitoringAgent:\nBewaakt verkeer"
database Store as "Store:\nOpslag van logs/configuratie"

Gebruiker --> APIClient: doeAanroep(data)

APIClient -> SecurityWrapper: encrypt(data)

SecurityWrapper --> APIClient: versleuteldeData

APIClient -> APIProxy: verstuur(versleuteldeData)

APIProxy -> MonitoringAgent: logAanroep(versleuteldeData)

alt API beschikbaar
    APIProxy -> ExterneAPI: verzend(ontsleuteldeData)
    ExterneAPI --> APIProxy: antwoord
end

APIProxy -> APIClient: verzendAntwoord

APIClient -> MonitoringAgent: logAntwoord
APIClient --> Gebruiker: resultaat

@enduml